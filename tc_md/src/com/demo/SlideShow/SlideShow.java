package com.demo.SlideShow;import com.google.gson.Gson;import com.jfinal.core.Controller;import com.jfinal.plugin.activerecord.Db;import com.jfinal.plugin.activerecord.Record;import org.json.JSONException;import org.json.JSONObject;import java.io.BufferedReader;import java.io.IOException;import java.util.ArrayList;import java.util.List;/** * Created by huangzhiwei on 16/10/22. */public class SlideShow extends Controller{    public void index(){       /* StringBuilder jsonstr = new StringBuilder();        BufferedReader reader = this.getRequest().getReader();        String line = null;        while((line = reader.readLine()) != null){            jsonstr.append(line);        }        reader.close();        String js = String.valueOf(jsonstr);        JSONObject jsonobj = null;        try {            jsonobj = new JSONObject(js);        } catch (JSONException e) {            e.printStackTrace();        }*/        String top_image[] = new String[3];        String class_name[] = new String[3];        for (int i=1;i<=3;i++){            List<Record> classes = Db.find("select * from class where id = "+String.valueOf(i));              Record cs = classes.get(0);            top_image[i-1] = cs.getStr("class_pic_url");            class_name[i-1] = cs.getStr("class_name");          }        //给出轮播图       /* String top_imageurl ="{\n" +                "\"top\":[\n" +                "{\"top_image\":\n" +                "\""+top_image[0]+"\",\n" +                "\"class_name\":\n" +                "\""+class_name[0]+"\"\n" +                " },\n" +                "{\"top_image\":\n" +                "\""+top_image[1]+"\",\n" +                "\"class_name\":\n" +                "\""+class_name[1]+"\"\n" +                " },\n" +                "{\"top_image\":\n" +                "\""+top_image[2]+"\",\n" +                "\"class_name\":\n" +                "\""+class_name[2]+"\"\n" +                " }\n" +                "]\n" +                "}";                */      List<Top_image> top_images = new ArrayList<Top_image>();        Top_image tp1 = new Top_image(top_image[0],class_name[0]);        Top_image tp2 = new Top_image(top_image[1],class_name[1]);        Top_image tp3 = new Top_image(top_image[2],class_name[2]);        TopList tlist = new TopList();        List<Top_image> toplist = tlist.getTop();        toplist.add(tp1);        toplist.add(tp2);       toplist.add(tp3);        Gson gson = new Gson();        renderText(gson.toJson(tlist));            }        }